<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oil Prices</title>
    <link rel="stylesheet" href="Oli.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <h3 class="alert alert-success text-center">ข้อมูลน้ำมัน ณ วันที่ : <span id="date"></span></h3>

      <!-- สร้าง container แต่ละบริษัทด้วย ID -->
      <div class="container-sm col-sm-8 text-center">
        <div id="PTT" class="company-container me-2">
          <img src="https://iconape.com/wp-content/png_logo_vector/ptt-public-company-logo.png" width="250px" class="logo">
        </div>
        <div id="BCP" class="company-container">
          <img src="https://www.bangchak.co.th/storage/document/logo/Color-Logo-Vertical.png" width="250px" class="logo">
        </div>
      </div>
      <div class="container-sm col-sm-8 text-center">
        <div id="SHELL" class="company-container">
          <img src="https://cdn.freebiesupply.com/logos/large/2x/shell-3-logo-png-transparent.png" width="250px" class="logo">
        </div>
        <div id="ESSO" class="company-container">
          <img src="https://logos-download.com/wp-content/uploads/2016/07/Esso_logo.png" width="250px" class="logo">
        </div>
      </div>
      <div class="container-sm col-sm-8 text-center">
        <div id="CALTEX" class="company-container">
          <img src="https://logos-world.net/wp-content/uploads/2023/05/Caltex-Logo.png" width="50px">
        </div>
        <div id="IRPC" class="company-container">
          <img src="https://www.irpc.co.th/wp-content/themes/irpc_theme/assets/img/svg/logo-menu-pc.svg" alt="" class="logo">
        </div>
      </div>
      <div class="container-sm col-sm-8 text-center">
        <div id="PT" class="company-container">
          <img src="https://www.ptgenergy.co.th/images/logo.png" class="logo">
        </div>
        <div id="SUSCO" class="company-container">
          <img src="https://www.susco.co.th/images/logo_susco.png" width="150">
        </div>
      </div>
      <div class="container-sm col-sm-8 text-center">
        <div id="PURE" class="company-container">
          <img src="https://www.purethai.co.th/wp-content/uploads/2022/03/logo_purethai-450px-01.png" class="logo">
        </div>
        <div id="SUSCO_DEALERS" class="company-container">
          <img src="https://www.susco.co.th/images/logo_susco.png" width="150">
        </div>
      </div>
    </div>
    
    <script>
      getOil();
      function getOil() {
        var dateElement = document.getElementById("date");

        fetch("https://oil-api.vercel.app/latest")
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok" + response.statusText);
            }
            return response.json();
          })
          .then((data) => {
            const { date, stations } = data.response;
            dateElement.innerHTML = date;

            // แสดงข้อมูลน้ำมันในแท็กตาม ID ของแต่ละบริษัท
            for (var company in stations) {
              var stationData = stations[company];
              var companyElement = document.getElementById(company.toUpperCase());

              if (companyElement) {
                // เพิ่มชื่อบริษัทใน container
                var companyTitle = document.createElement("h4");
                companyTitle.textContent = company.toUpperCase();
                companyElement.appendChild(companyTitle);

                // สร้าง ul สำหรับรายการน้ำมัน
                var fuelList = document.createElement("ul");

                for (var key in stationData) {
                  var fuel = stationData[key];
                  
                  // สร้าง li
                  var listItem = document.createElement("li");

                  // สร้าง span สำหรับชื่อและราคา
                  var fuelNameSpan = document.createElement("li");
                  fuelNameSpan.textContent = fuel.name;
                  
                  var fuelPriceSpan = document.createElement("span");
                  fuelPriceSpan.textContent = ` ราคา ${fuel.price}`;

                  // แทรก span ทั้งสองเข้ามาใน li
                  listItem.appendChild(fuelNameSpan);
                  listItem.appendChild(fuelPriceSpan);

                  // เพิ่ม li ลงใน ul
                  fuelList.appendChild(listItem);
                }

                // เพิ่ม ul ลงใน company container
                companyElement.appendChild(fuelList);
              }
            }
          });
      }
    </script>
  </body>
</html>
